<!DOCTYPE html>
<html data-theme="light" lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link
            href="https://cdn.jsdelivr.net/npm/daisyui@2.8.0/dist/full.css"
            rel="stylesheet"
            type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
            href="https://fonts.googleapis.com/icon?family=Material+Icons"
            rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@0.5.4/dist/simple-notify.min.css"/>
    <title>Categorias | Covec</title>
</head>
<body id="bodyid">
<div class="container mx-auto p-5">
    <div class="grid grid-cols-1 justify-items-center p-6">
        <h1 class="text-2xl font-semibold">Categorias registradas</h1>
        <h3 class="text-lg font-light text-gray-600">Lista de categorias</h3>
    </div>

    <div class="grid grid-cols-4">
        <div th:replace="categoria/ModalFGT::modalFG"></div>
    </div>

    <div class="alert shadow-lg w-auto m-5 bg-yellow-500" id="validaciones" th:if="${errores != null}">
        <div class="grid grid-cols-1">
            <div class="flex justify-start">
                <span class="material-icons text-white drop-shadow-lg">report_problem</span>
                <h6 class="font-semibold ml-1 text-white drop-shadow-lg">ATENCIÃ“N</h6>
            </div>
            <h6 th:each="e:${errores}" class="text-xs text-white drop-shadow-lg">- [[${e}]]</h6>
        </div>
        <div class="flex-none">
            <button id="cerrar" class="btn btn-sm text-white">Cerrar</button>
        </div>
    </div>

    <div class="overflow-x-auto p-6">
        <div class="grid grid-cols-1 justify-items-center">
            <table id="tabla" class="table w-full">
                <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="c,i:${categorias}">
                    <td th:text="${c.nombre}"></td>
                    <td>
                        <div class="grid grid-cols-2">
                            <div
                                    th:replace="categoria/ModalUpdate::modalUpdate(${c}, ${i.count})"
                            ></div>
                            <a
                                    class="btn w-24"
                                    th:href="@{/categorias/delete/{id}(id=${c.id})}"
                                    style="background-color: #605ad4"
                            >
                                <span class="material-icons">delete</span>
                            </a>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="grid justify-items-end">
        <div class="btn-group">
            <a
                    th:each="page:${paginas}"
                    class="btn"
                    style="background-color: white; color: black"
                    th:href="@{|/categorias/all/?page=${page}|}"
                    th:text="${page}"
            ></a>
        </div>
    </div>
</div>

<script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/simple-notify@0.5.4/dist/simple-notify.min.js"></script>
<script>
    $(document).ready(function () {
        $("#cerrar").click(() => {
            $("#validaciones").hide("slow");
        })
    });
</script>

<script th:if="${mensaje != null}">
    var mensaje = '[[${mensaje}]]'
    new Notify({
        status: 'success',
        title: 'Exito',
        text: mensaje,
        effect: 'fade',
        speed: 300,
        customClass: '',
        customIcon: '',
        showIcon: true,
        showCloseButton: true,
        autoclose: false,
        autotimeout: 3000,
        gap: 20,
        distance: 20,
        type: 1,
        position: 'bottom left'
    })
</script>
</body>
</html>
